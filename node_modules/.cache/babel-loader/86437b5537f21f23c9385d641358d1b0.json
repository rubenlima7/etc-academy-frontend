{"ast":null,"code":"/*!\nFullCalendar v5.8.0\nDocs & License: https://fullcalendar.io/\n(c) 2021 Adam Shaw\n*/\nimport './vdom.js';\nimport { __extends, __assign } from 'tslib';\nimport { render, createElement, CalendarRoot, CustomContentRenderContext, CalendarContent, unmountComponentAtNode, flushToDom, DelayedRunner, CalendarDataManager, isArraysEqual, applyStyleProp, CalendarApi } from '@fullcalendar/common';\nexport * from '@fullcalendar/common';\n\nvar Calendar =\n/** @class */\nfunction (_super) {\n  __extends(Calendar, _super);\n\n  function Calendar(el, optionOverrides) {\n    if (optionOverrides === void 0) {\n      optionOverrides = {};\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.isRendering = false;\n    _this.isRendered = false;\n    _this.currentClassNames = [];\n    _this.customContentRenderId = 0; // will affect custom generated classNames?\n\n    _this.handleAction = function (action) {\n      // actions we know we want to render immediately\n      switch (action.type) {\n        case 'SET_EVENT_DRAG':\n        case 'SET_EVENT_RESIZE':\n          _this.renderRunner.tryDrain();\n\n      }\n    };\n\n    _this.handleData = function (data) {\n      _this.currentData = data;\n\n      _this.renderRunner.request(data.calendarOptions.rerenderDelay);\n    };\n\n    _this.handleRenderRequest = function () {\n      if (_this.isRendering) {\n        _this.isRendered = true;\n        var currentData_1 = _this.currentData;\n        render(createElement(CalendarRoot, {\n          options: currentData_1.calendarOptions,\n          theme: currentData_1.theme,\n          emitter: currentData_1.emitter\n        }, function (classNames, height, isHeightAuto, forPrint) {\n          _this.setClassNames(classNames);\n\n          _this.setHeight(height);\n\n          return createElement(CustomContentRenderContext.Provider, {\n            value: _this.customContentRenderId\n          }, createElement(CalendarContent, __assign({\n            isHeightAuto: isHeightAuto,\n            forPrint: forPrint\n          }, currentData_1)));\n        }), _this.el);\n      } else if (_this.isRendered) {\n        _this.isRendered = false;\n        unmountComponentAtNode(_this.el);\n\n        _this.setClassNames([]);\n\n        _this.setHeight('');\n      }\n\n      flushToDom();\n    };\n\n    _this.el = el;\n    _this.renderRunner = new DelayedRunner(_this.handleRenderRequest);\n    new CalendarDataManager({\n      optionOverrides: optionOverrides,\n      calendarApi: _this,\n      onAction: _this.handleAction,\n      onData: _this.handleData\n    });\n    return _this;\n  }\n\n  Object.defineProperty(Calendar.prototype, \"view\", {\n    get: function get() {\n      return this.currentData.viewApi;\n    } // for public API\n    ,\n    enumerable: false,\n    configurable: true\n  });\n\n  Calendar.prototype.render = function () {\n    var wasRendering = this.isRendering;\n\n    if (!wasRendering) {\n      this.isRendering = true;\n    } else {\n      this.customContentRenderId += 1;\n    }\n\n    this.renderRunner.request();\n\n    if (wasRendering) {\n      this.updateSize();\n    }\n  };\n\n  Calendar.prototype.destroy = function () {\n    if (this.isRendering) {\n      this.isRendering = false;\n      this.renderRunner.request();\n    }\n  };\n\n  Calendar.prototype.updateSize = function () {\n    _super.prototype.updateSize.call(this);\n\n    flushToDom();\n  };\n\n  Calendar.prototype.batchRendering = function (func) {\n    this.renderRunner.pause('batchRendering');\n    func();\n    this.renderRunner.resume('batchRendering');\n  };\n\n  Calendar.prototype.pauseRendering = function () {\n    this.renderRunner.pause('pauseRendering');\n  };\n\n  Calendar.prototype.resumeRendering = function () {\n    this.renderRunner.resume('pauseRendering', true);\n  };\n\n  Calendar.prototype.resetOptions = function (optionOverrides, append) {\n    this.currentDataManager.resetOptions(optionOverrides, append);\n  };\n\n  Calendar.prototype.setClassNames = function (classNames) {\n    if (!isArraysEqual(classNames, this.currentClassNames)) {\n      var classList = this.el.classList;\n\n      for (var _i = 0, _a = this.currentClassNames; _i < _a.length; _i++) {\n        var className = _a[_i];\n        classList.remove(className);\n      }\n\n      for (var _b = 0, classNames_1 = classNames; _b < classNames_1.length; _b++) {\n        var className = classNames_1[_b];\n        classList.add(className);\n      }\n\n      this.currentClassNames = classNames;\n    }\n  };\n\n  Calendar.prototype.setHeight = function (height) {\n    applyStyleProp(this.el, 'height', height);\n  };\n\n  return Calendar;\n}(CalendarApi);\n\nexport { Calendar };","map":{"version":3,"sources":["src/Calendar.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  CalendarOptions, Action, CalendarContent, render, createElement, DelayedRunner, CssDimValue, applyStyleProp,\n  CalendarApi, CalendarRoot, isArraysEqual, CalendarDataManager, CalendarData,\n  CustomContentRenderContext, flushToDom, unmountComponentAtNode,\n} from '@fullcalendar/common'\n\nexport class Calendar extends CalendarApi {\n  currentData: CalendarData\n  renderRunner: DelayedRunner\n  el: HTMLElement\n  isRendering = false\n  isRendered = false\n  currentClassNames: string[] = []\n  customContentRenderId = 0 // will affect custom generated classNames?\n\n  get view() { return this.currentData.viewApi } // for public API\n\n  constructor(el: HTMLElement, optionOverrides: CalendarOptions = {}) {\n    super()\n\n    this.el = el\n    this.renderRunner = new DelayedRunner(this.handleRenderRequest)\n\n    new CalendarDataManager({ // eslint-disable-line no-new\n      optionOverrides,\n      calendarApi: this,\n      onAction: this.handleAction,\n      onData: this.handleData,\n    })\n  }\n\n  handleAction = (action: Action) => {\n    // actions we know we want to render immediately\n    switch (action.type) {\n      case 'SET_EVENT_DRAG':\n      case 'SET_EVENT_RESIZE':\n        this.renderRunner.tryDrain()\n    }\n  }\n\n  handleData = (data: CalendarData) => {\n    this.currentData = data\n    this.renderRunner.request(data.calendarOptions.rerenderDelay)\n  }\n\n  handleRenderRequest = () => {\n    if (this.isRendering) {\n      this.isRendered = true\n      let { currentData } = this\n\n      render(\n        <CalendarRoot options={currentData.calendarOptions} theme={currentData.theme} emitter={currentData.emitter}>\n          {(classNames, height, isHeightAuto, forPrint) => {\n            this.setClassNames(classNames)\n            this.setHeight(height)\n\n            return (\n              <CustomContentRenderContext.Provider value={this.customContentRenderId}>\n                <CalendarContent\n                  isHeightAuto={isHeightAuto}\n                  forPrint={forPrint}\n                  {...currentData}\n                />\n              </CustomContentRenderContext.Provider>\n            )\n          }}\n        </CalendarRoot>,\n        this.el,\n      )\n    } else if (this.isRendered) {\n      this.isRendered = false\n      unmountComponentAtNode(this.el)\n      this.setClassNames([])\n      this.setHeight('')\n    }\n\n    flushToDom()\n  }\n\n  render() {\n    let wasRendering = this.isRendering\n\n    if (!wasRendering) {\n      this.isRendering = true\n    } else {\n      this.customContentRenderId += 1\n    }\n\n    this.renderRunner.request()\n\n    if (wasRendering) {\n      this.updateSize()\n    }\n  }\n\n  destroy() {\n    if (this.isRendering) {\n      this.isRendering = false\n      this.renderRunner.request()\n    }\n  }\n\n  updateSize() {\n    super.updateSize()\n    flushToDom()\n  }\n\n  batchRendering(func) {\n    this.renderRunner.pause('batchRendering')\n    func()\n    this.renderRunner.resume('batchRendering')\n  }\n\n  pauseRendering() { // available to plugins\n    this.renderRunner.pause('pauseRendering')\n  }\n\n  resumeRendering() { // available to plugins\n    this.renderRunner.resume('pauseRendering', true)\n  }\n\n  resetOptions(optionOverrides, append?) {\n    this.currentDataManager.resetOptions(optionOverrides, append)\n  }\n\n  setClassNames(classNames: string[]) {\n    if (!isArraysEqual(classNames, this.currentClassNames)) {\n      let { classList } = this.el\n\n      for (let className of this.currentClassNames) {\n        classList.remove(className)\n      }\n\n      for (let className of classNames) {\n        classList.add(className)\n      }\n\n      this.currentClassNames = classNames\n    }\n  }\n\n  setHeight(height: CssDimValue) {\n    applyStyleProp(this.el, 'height', height)\n  }\n}\n"]},"metadata":{},"sourceType":"module"}